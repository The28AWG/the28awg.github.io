webpackJsonp([1],{"0GI7":function(t,e){},J8vh:function(t,e){},LMYW:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("7+uW"),a=s("/ocq"),n=s("Sazm"),r=s.n(n),c=s("vQJi"),o=s.n(c),l={name:"sign-in",data:function(){return{email:"",password:""}},methods:{signInWithGoogle:function(){var t=this;r.a.auth().signInWithRedirect(new r.a.auth.GoogleAuthProvider).then(function(){o.a.success("Вы вошли с помощью Google!"),t.$router.replace("/")},function(t){return o.a.error(t)})},signIn:function(){var t=this;r.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(){o.a.success("Вы вошли!"),t.$router.replace("/")},function(t){return o.a.error(t)})}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h3",[t._v("Sign In")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"text",placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),s("br"),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),s("br"),t._v(" "),s("button",{on:{click:t.signIn}},[t._v("Sign In")]),t._v(" "),s("div",[s("button",{on:{click:t.signInWithGoogle}},[t._v("Sign in with Google")])])])},staticRenderFns:[]};var p=s("VU/8")(l,d,!1,function(t){s("J8vh")},"data-v-033ebef6",null).exports,v={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var u=s("VU/8")({name:"sign-up"},v,!1,function(t){s("RWR3")},"data-v-c94af80c",null).exports,h={name:"app-header",props:{title:{type:String,required:!0},href:{type:String,required:!0}}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"#header"}},[e("h1",{staticClass:"center-align"},[e("a",{attrs:{href:this.href}},[this._v(this._s(this.title))])])])},staticRenderFns:[]};var g=s("VU/8")(h,m,!1,function(t){s("0GI7")},"data-v-39efcb13",null).exports;var f={components:{AppHeader:g},name:"post",data:function(){return{post:{id:"",title:"",content:"",createdAtLocale:"",tags:[]},busy:!0}},mounted:function(){var t=this;r.a.firestore().collection("posts").doc(this.$route.params.postId).get().then(function(e){e.exists?(t.post.id=e.id,t.post.title=e.get("title"),t.post.content=e.get("content"),t.post.createdAtLocale=new Date(e.get("createdAt")).toLocaleString(void 0!==navigator.languages?navigator.languages[0]:navigator.language,{year:"numeric",month:"numeric",day:"numeric",timezone:"UTC",hour:"numeric",minute:"numeric"}),t.post.tags=e.get("tags"),t.busy=!1):t.$router.push({name:"PageNotFound"})})}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("app-header",{attrs:{href:"/",title:"Posts"}}),t._v(" "),t.busy?s("div",{staticClass:"center-align"},[t._m(0)]):s("div",{staticClass:"card-panel hoverable"},[s("div",{staticClass:"row"},[s("div",{staticClass:"truncate col s9"},[s("router-link",{attrs:{to:{name:"Post",params:{postId:t.post.id}}}},[t._v(t._s(t.post.title))])],1),t._v(" "),s("div",{staticClass:"truncate col s3 right-align"},[t._v("Опубликовано: "+t._s(t.post.createdAtLocale))])]),t._v(" "),s("div",{staticClass:"flow-text",domProps:{innerHTML:t._s(t.post.content)}}),t._v(" "),s("div",{staticClass:"right-align"},t._l(t.post.tags,function(e){return s("div",{staticClass:"chip"},[s("router-link",{attrs:{to:{name:"Tag",params:{tagId:e}}}},[t._v(t._s(e))])],1)}))])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"preloader-wrapper big active"},[e("div",{staticClass:"spinner-layer spinner-blue"},[e("div",{staticClass:"circle-clipper left"},[e("div",{staticClass:"circle"})]),this._v(" "),e("div",{staticClass:"gap-patch"},[e("div",{staticClass:"circle"})]),this._v(" "),e("div",{staticClass:"circle-clipper right"},[e("div",{staticClass:"circle"})])]),this._v(" "),e("div",{staticClass:"spinner-layer spinner-red"},[e("div",{staticClass:"circle-clipper left"},[e("div",{staticClass:"circle"})]),this._v(" "),e("div",{staticClass:"gap-patch"},[e("div",{staticClass:"circle"})]),this._v(" "),e("div",{staticClass:"circle-clipper right"},[e("div",{staticClass:"circle"})])]),this._v(" "),e("div",{staticClass:"spinner-layer spinner-yellow"},[e("div",{staticClass:"circle-clipper left"},[e("div",{staticClass:"circle"})]),this._v(" "),e("div",{staticClass:"gap-patch"},[e("div",{staticClass:"circle"})]),this._v(" "),e("div",{staticClass:"circle-clipper right"},[e("div",{staticClass:"circle"})])]),this._v(" "),e("div",{staticClass:"spinner-layer spinner-green"},[e("div",{staticClass:"circle-clipper left"},[e("div",{staticClass:"circle"})]),this._v(" "),e("div",{staticClass:"gap-patch"},[e("div",{staticClass:"circle"})]),this._v(" "),e("div",{staticClass:"circle-clipper right"},[e("div",{staticClass:"circle"})])])])}]};var C=s("VU/8")(f,_,!1,function(t){s("yeMc")},"data-v-0608c4b9",null).exports;var w=void 0,b={components:{AppHeader:g},name:"index",data:function(){return{posts:[],busy:!1,perPage:2,totalPosts:1,currentPage:1,last_content:!1}},created:function(){var t=this;w=r.a.firestore().collection("posts").orderBy("createdAt","desc").limit(2),r.a.firestore().collection("posts").doc("meta").get().then(function(e){t.totalPosts=e.get("total")})},methods:{fetchPage:function(){var t=this;console.log("[start] fetchPage:"+new Date),w.get().then(function(e){var s=e.docs[e.docs.length-1];w=r.a.firestore().collection("posts").orderBy("createdAt","desc").startAfter(s).limit(2);var i=[];e.forEach(function(t){i.push({id:t.id,title:t.get("title"),description:t.get("description"),createdAt:t.get("createdAt"),createdAtLocale:new Date(t.get("createdAt")).toLocaleString(void 0!==navigator.languages?navigator.languages[0]:navigator.language,{year:"numeric",month:"numeric",day:"numeric",timezone:"UTC",hour:"numeric",minute:"numeric"}),tags:t.get("tags")||[]})}),i.forEach(function(e){t.posts.push(e)}),t.busy=!1,console.log("[end] fetchPage:"+new Date)})},loadMore:function(){this.busy||(this.busy=!0,this.posts.length!==this.totalPosts&&this.fetchPage())}}},P={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},[s("app-header",{attrs:{href:"/",title:"Posts"}}),t._v(" "),t._l(t.posts,function(e){return s("div",{staticClass:"card-panel hoverable"},[s("div",{staticClass:"row"},[s("div",{staticClass:"truncate col s9"},[s("router-link",{attrs:{to:{name:"Post",params:{postId:e.id}}}},[t._v(t._s(e.title))])],1),t._v(" "),s("div",{staticClass:"truncate col s3 right-align"},[t._v("Опубликовано: "+t._s(e.createdAtLocale))])]),t._v(" "),s("div",{staticClass:"flow-text",domProps:{innerHTML:t._s(e.description)}}),t._v(" "),s("div",{staticClass:"right-align"},t._l(e.tags,function(e){return s("div",{staticClass:"chip"},[s("router-link",{attrs:{to:{name:"Tag",params:{tagId:e}}}},[t._v(t._s(e))])],1)})),t._v(" "),s("div",[s("router-link",{staticClass:"waves-effect waves-light btn",attrs:{to:{name:"Post",params:{postId:e.id}}}},[t._v("Читать\n        дальше\n      ")])],1)])}),t._v(" "),t.busy&&t.posts.length!==t.totalPosts?s("div",{staticClass:"center-align"},[t._m(0)]):t._e()],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"preloader-wrapper big active"},[e("div",{staticClass:"spinner-layer spinner-blue"},[e("div",{staticClass:"circle-clipper left"},[e("div",{staticClass:"circle"})]),this._v(" "),e("div",{staticClass:"gap-patch"},[e("div",{staticClass:"circle"})]),this._v(" "),e("div",{staticClass:"circle-clipper right"},[e("div",{staticClass:"circle"})])]),this._v(" "),e("div",{staticClass:"spinner-layer spinner-red"},[e("div",{staticClass:"circle-clipper left"},[e("div",{staticClass:"circle"})]),this._v(" "),e("div",{staticClass:"gap-patch"},[e("div",{staticClass:"circle"})]),this._v(" "),e("div",{staticClass:"circle-clipper right"},[e("div",{staticClass:"circle"})])]),this._v(" "),e("div",{staticClass:"spinner-layer spinner-yellow"},[e("div",{staticClass:"circle-clipper left"},[e("div",{staticClass:"circle"})]),this._v(" "),e("div",{staticClass:"gap-patch"},[e("div",{staticClass:"circle"})]),this._v(" "),e("div",{staticClass:"circle-clipper right"},[e("div",{staticClass:"circle"})])]),this._v(" "),e("div",{staticClass:"spinner-layer spinner-green"},[e("div",{staticClass:"circle-clipper left"},[e("div",{staticClass:"circle"})]),this._v(" "),e("div",{staticClass:"gap-patch"},[e("div",{staticClass:"circle"})]),this._v(" "),e("div",{staticClass:"circle-clipper right"},[e("div",{staticClass:"circle"})])])])}]};var y=s("VU/8")(b,P,!1,function(t){s("vC1Z")},null,null).exports,x={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("fghdf")])},staticRenderFns:[]};var I=s("VU/8")({name:"tag",data:function(){return{posts:[{title:"Post#1",content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque finibus facilisis dolor vel mattis. Aliquam euismod ornare odio vitae feugiat. Suspendisse viverra arcu sit amet orci vehicula, at elementum tellus molestie. Quisque commodo, libero in maximus elementum, mi velit vestibulum tortor, eget mattis ipsum est a ligula. Sed vestibulum velit luctus interdum pulvinar. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque placerat justo massa, ac rhoncus neque placerat ut."}],currentPage:1,totalPage:0}}},x,!1,function(t){s("UgMt")},"data-v-7d2d1d30",null).exports,A=s("7t+N"),$=s.n(A),E=s("0lrd"),N=s.n(E),S={components:{AppHeader:g},name:"new-post",data:function(){return{post:{title:"",description:"",content:"",tags:[]},previewContent:!1,previewDescription:!1}},methods:{newPost:function(){var t=this;this.$validator.validateAll().then(function(e){e&&r.a.firestore().collection("posts").add({title:t.post.title,description:t.post.description,content:t.post.content,tags:t.post.tags}).then(function(t){console.log("Document written with ID: ",t.id);var e=t.id;this.$router.push({name:"Post",params:{postId:e}})}).catch(function(t){console.error("Error adding document: ",t)})})}},mounted:function(){var t=this;N.a.updateTextFields(),$()("#content").trigger("autoresize");var e=$()(".chips");e.material_chip({placeholder:"Enter a tag",secondaryPlaceholder:"+Tag"}),e.on("chip.add",function(e,s){t.post.tags.push(s.tag)}),e.on("chip.delete",function(e,s){var i=t.post.tags.indexOf(s.tag);i&&t.post.tags.splice(i,1)})}},U={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("app-header",{attrs:{href:"/",title:"Posts"}}),t._v(" "),s("div",{staticClass:"card-panel hoverable"},[s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.post.title,expression:"post.title"},{name:"validate",rawName:"v-validate",value:"required|min:3",expression:"'required|min:3'"}],staticClass:"validate",class:{invalid:t.errors.has("title")},attrs:{id:"title",type:"text",name:"title"},domProps:{value:t.post.title},on:{input:function(e){e.target.composing||t.$set(t.post,"title",e.target.value)}}}),t._v(" "),t.errors.has("title")?s("label",{attrs:{for:"title"}},[t._v(t._s(t.errors.first("title")))]):s("label",{attrs:{for:"title"}},[t._v("Заголовок:")])]),t._v(" "),t.previewContent?s("div",{staticClass:"flow-text",domProps:{innerHTML:t._s(t.post.content)}}):s("div",{staticClass:"input-field col s12"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.post.content,expression:"post.content"},{name:"validate",rawName:"v-validate",value:"required|min:3",expression:"'required|min:3'"}],staticClass:"materialize-textarea",class:{invalid:t.errors.has("content")},attrs:{id:"content",name:"content"},domProps:{value:t.post.content},on:{input:function(e){e.target.composing||t.$set(t.post,"content",e.target.value)}}}),t._v(" "),t.errors.has("content")?s("label",{attrs:{for:"content"}},[t._v(t._s(t.errors.first("content")))]):s("label",{attrs:{for:"content"}},[t._v("Текст:")])]),t._v(" "),s("div",{staticClass:"col s12 right-align"},[s("button",{staticClass:"waves-effect waves-light btn-flat",on:{click:function(e){t.previewContent=!t.previewContent}}},[t._v(t._s(t.previewContent?"Редактировать":"Предпросмотр")+"\n        ")])]),t._v(" "),t.previewDescription?s("div",{staticClass:"flow-text",domProps:{innerHTML:t._s(t.post.description)}}):s("div",{staticClass:"input-field col s12"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.post.description,expression:"post.description"},{name:"validate",rawName:"v-validate",value:"min:3|max:3000",expression:"'min:3|max:3000'"}],staticClass:"materialize-textarea",class:{invalid:t.errors.has("description")},attrs:{id:"description","data-length":"3000",name:"description"},domProps:{value:t.post.description},on:{input:function(e){e.target.composing||t.$set(t.post,"description",e.target.value)}}}),t._v(" "),t.errors.has("description")?s("label",{attrs:{for:"description"}},[t._v(t._s(t.errors.first("description")))]):s("label",{attrs:{for:"description"}},[t._v("Описание:")])]),t._v(" "),s("div",{staticClass:"col s12 right-align"},[s("button",{staticClass:"waves-effect waves-light btn-flat",on:{click:function(e){t.previewDescription=!t.previewDescription}}},[t._v(t._s(t.previewDescription?"Редактировать":"Предпросмотр")+"\n        ")])])]),t._v(" "),s("div",{staticClass:"chips chips-placeholder"}),t._v(" "),s("div",{staticClass:"right-align"},[s("button",{staticClass:"waves-effect waves-light btn",on:{click:t.newPost}},[t._v("Опубликовать")])])])],1)},staticRenderFns:[]};var k=s("VU/8")(S,U,!1,function(t){s("LMYW")},"data-v-72f0d6f5",null).exports,L={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h1",[this._v("404")]),this._v(" "),e("h3",[this._v("the page you seek does not exist")])])}]};var M=s("VU/8")({name:"page-not-found"},L,!1,function(t){s("lzeD")},"data-v-070eacc0",null).exports;i.a.use(a.a);var q=new a.a({mode:"history",routes:[{path:"*",redirect:{name:"PageNotFound"}},{path:"404.html",name:"PageNotFound",component:M},{path:"/",name:"Index",component:y},{path:"/post/:postId",name:"Post",component:C},{path:"/tag/:tagId",name:"Tag",component:I},{path:"/sign-in",name:"SignIn",component:p},{path:"/new-post",name:"NewPost",component:k},{path:"/sign-up",name:"SignUp",component:u}]}),D=s("NYxO");i.a.use(D.a);var R=new D.a.Store({});R.registerModule("toolbar",{state:function(){return{test:""}},getters:{doneTodos:function(t){return function(e){return t.test[e]}}}});var T=R,F=(s("3VHS"),s("sUu7")),z=s("bqTm"),H=s.n(z);i.a.config.productionTip=!1,i.a.use(F.a),i.a.use(H.a);var V=void 0;r.a.initializeApp({apiKey:"AIzaSyBiP2i-rJ3Esk46CP2XzclzFfpYkOU33C8",authDomain:"idea-91aa1.firebaseapp.com",databaseURL:"https://idea-91aa1.firebaseio.com",projectId:"idea-91aa1",storageBucket:"idea-91aa1.appspot.com",messagingSenderId:"1086146862670"}),r.a.auth().onAuthStateChanged(function(t){V||(V=new i.a({el:"#app",router:q,store:T}))})},RWR3:function(t,e){},UgMt:function(t,e){},lzeD:function(t,e){},vC1Z:function(t,e){},yeMc:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.6395496c4d6d7d103a7f.js.map