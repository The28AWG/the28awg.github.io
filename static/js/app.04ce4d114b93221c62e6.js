webpackJsonp([1],{"7zck":function(t,e){},GVg2:function(t,e){},J8vh:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),i=a.n(n),s=a("7+uW"),o=a("/ocq"),r=a("Sazm"),c=a.n(r),l=a("vQJi"),u=a.n(l),d={name:"sign-in",data:function(){return{email:"",password:""}},methods:{signInWithGoogle:function(){var t=this;c.a.auth().signInWithRedirect(new c.a.auth.GoogleAuthProvider).then(function(){u.a.success("Вы вошли с помощью Google!"),t.$router.replace("/")},function(t){return u.a.error(t)})},signIn:function(){var t=this;c.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(){u.a.success("Вы вошли!"),t.$router.replace("/")},function(t){return u.a.error(t)})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",[t._v("Sign In")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"text",placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),a("br"),t._v(" "),a("button",{on:{click:t.signIn}},[t._v("Sign In")]),t._v(" "),a("div",[a("button",{on:{click:t.signInWithGoogle}},[t._v("Sign in with Google")])])])},staticRenderFns:[]};var m=a("VU/8")(d,p,!1,function(t){a("J8vh")},"data-v-033ebef6",null).exports,v={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var g=a("VU/8")({name:"sign-up"},v,!1,function(t){a("RWR3")},"data-v-c94af80c",null).exports,f={name:"post",data:function(){return{post:{id:void 0,title:"",content:"",createdAtLocale:"",tags:[]},loaded:!1}},created:function(){var t=this;c.a.firestore().collection("posts").doc(this.$route.params.postId).get().then(function(e){e.exists?(t.post.id=e.id,t.post.title=e.get("title"),t.post.content=e.get("content"),t.post.createdAtLocale=new Date(e.get("createdAt")).toLocaleString(t.$store.state.lang,{year:"numeric",month:"numeric",day:"numeric",timezone:"UTC",hour:"numeric",minute:"numeric"}),t.post.tags=e.get("tags"),t.loaded=!0):t.$router.push({name:"PageNotFound"})})}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:"","grid-list-md":""}},[t.loaded?a("v-card",{key:t.post.id,staticClass:"elevation-3 ma-3"},[a("v-card-title",{staticClass:"pa-0"},[a("v-toolbar",{attrs:{dense:""}},[a("v-toolbar-title",[a("router-link",{attrs:{to:{name:"Post",params:{postId:t.post.id}}}},[t._v(t._s(t.post.title))])],1),t._v(" "),a("v-spacer"),t._v(" "),a("div",[t._v("Опубликовано: "+t._s(t.post.createdAtLocale))])],1)],1),t._v(" "),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md12:"",sm12:"",xs12:""},domProps:{innerHTML:t._s(t.post.content)}})],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),t._l(t.post.tags,function(e){return a("v-chip",{key:e},[a("router-link",{attrs:{to:{name:"Tag",params:{tagId:e}}}},[t._v(t._s(e))])],1)})],2)],1):a("v-layout",{staticClass:"ma-3",attrs:{column:"","justify-center":"","align-center":""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)],1)},staticRenderFns:[]};var _=a("VU/8")(f,h,!1,function(t){a("w5zA")},"data-v-523f325b",null).exports,b=void 0,w={name:"index",data:function(){return{posts:[],busy:!1,totalPosts:1}},created:function(){var t=this;this.$store.commit("toolbar/title","Posts"),b=c.a.firestore().collection("posts").orderBy("createdAt","desc").limit(10),c.a.firestore().collection("posts").doc("meta").get().then(function(e){t.totalPosts=e.get("total")})},methods:{fetchPage:function(){var t=this;console.log("[start] fetchPage:"+new Date),b.get().then(function(e){var a=e.docs[e.docs.length-1];b=c.a.firestore().collection("posts").orderBy("createdAt","desc").startAfter(a).limit(2);var n=[];e.forEach(function(e){n.push({id:e.id,title:e.get("title"),description:e.get("description"),createdAt:new Date(e.get("createdAt")).toLocaleString(t.$store.state.lang,{year:"numeric",month:"numeric",day:"numeric",timezone:"UTC",hour:"numeric",minute:"numeric"})})}),n.forEach(function(e){t.posts.push(e)}),t.busy=!1,console.log("[end] fetchPage:"+new Date)})},loadMore:function(){console.log("load start!"),this.busy||(this.busy=!0,this.posts.length!==this.totalPosts&&this.fetchPage())}}},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},t._l(t.posts,function(e){return a("v-card",{key:e.id,staticClass:"elevation-3 ma-3"},[a("v-card-title",{staticClass:"pa-0"},[a("v-toolbar",{attrs:{dense:""}},[a("v-toolbar-title",[a("router-link",{attrs:{to:{name:"Post",params:{postId:e.id}}}},[t._v(t._s(e.title))])],1),t._v(" "),a("v-spacer"),t._v(" "),a("div",[t._v("Опубликовано: "+t._s(e.createdAt))])],1)],1),t._v(" "),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md12:"",sm12:"",xs12:""},domProps:{innerHTML:t._s(e.description)}})],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{to:{name:"Post",params:{postId:e.id}}}},[t._v("Читать дальше")])],1)],1)})),t._v(" "),t.busy&&t.posts.length!==t.totalPosts?a("v-layout",{staticClass:"ma-3",attrs:{column:"","justify-center":"","align-center":""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):t._e()],1)},staticRenderFns:[]};var y=a("VU/8")(w,P,!1,function(t){a("GVg2")},null,null).exports,x={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("fghdf")])},staticRenderFns:[]};var I=a("VU/8")({name:"tag",data:function(){return{posts:[{title:"Post#1",content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque finibus facilisis dolor vel mattis. Aliquam euismod ornare odio vitae feugiat. Suspendisse viverra arcu sit amet orci vehicula, at elementum tellus molestie. Quisque commodo, libero in maximus elementum, mi velit vestibulum tortor, eget mattis ipsum est a ligula. Sed vestibulum velit luctus interdum pulvinar. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque placerat justo massa, ac rhoncus neque placerat ut."}],currentPage:1,totalPage:0}}},x,!1,function(t){a("UgMt")},"data-v-7d2d1d30",null).exports,k=a("7t+N"),A=a.n(k),$=a("0lrd"),E=a.n($),S={name:"new-post",data:function(){return{post:{title:"",description:"",content:"",tags:[]},previewContent:!1,previewDescription:!1}},methods:{newPost:function(){var t=this;this.$validator.validateAll().then(function(e){e&&c.a.firestore().collection("posts").add({title:t.post.title,description:t.post.description,content:t.post.content,tags:t.post.tags}).then(function(t){console.log("Document written with ID: ",t.id);var e=t.id;this.$router.push({name:"Post",params:{postId:e}})}).catch(function(t){console.error("Error adding document: ",t)})})}},mounted:function(){var t=this;E.a.updateTextFields(),A()("#content").trigger("autoresize");var e=A()(".chips");e.material_chip({placeholder:"Enter a tag",secondaryPlaceholder:"+Tag"}),e.on("chip.add",function(e,a){t.post.tags.push(a.tag)}),e.on("chip.delete",function(e,a){var n=t.post.tags.indexOf(a.tag);n&&t.post.tags.splice(n,1)})}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-card",{staticClass:"elevation-3 ma-3"},[a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md12:"",sm12:"",xs12:""}},[a("v-text-field",{attrs:{name:"title",label:"Заголовок",id:"title",rules:[function(){return t.errors.first("title")}],error:t.errors.has("title")},model:{value:t.post.title,callback:function(e){t.$set(t.post,"title",e)},expression:"post.title"}})],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),t._l(t.post.tags,function(e){return a("v-chip",{key:e},[a("router-link",{attrs:{to:{name:"Tag",params:{tagId:e}}}},[t._v(t._s(e))])],1)})],2)],1)],1)},staticRenderFns:[]};var z=a("VU/8")(S,U,!1,function(t){a("ogXb")},"data-v-3047c958",null).exports,C={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h1",[this._v("404")]),this._v(" "),e("h3",[this._v("the page you seek does not exist")])])}]};var R=a("VU/8")({name:"page-not-found"},C,!1,function(t){a("lzeD")},"data-v-070eacc0",null).exports;s.a.use(o.a);var D=new o.a({mode:"history",routes:[{path:"*",redirect:{name:"PageNotFound"}},{path:"404.html",name:"PageNotFound",component:R},{path:"/",name:"Posts",component:y},{path:"/post/:postId",name:"Post",component:_},{path:"/tag/:tagId",name:"Tag",component:I},{path:"/sign-in",name:"SignIn",component:m},{path:"/new-post",name:"NewPost",component:z},{path:"/sign-up",name:"SignUp",component:g}]}),F=a("NYxO");var N={namespaced:!0,state:function(){return{menu:[{id:"test",title:"test",visible:!0,callback:function(){console.log("test callback")}}]}},mutations:{add:function(t,e){t.menu.push(e)},visible:function(t,e){var a,n=(a=e,t.menu.find(function(t){return t.id===a}));void 0!==n&&(n.visible=!n.visible)},remove:function(t,e){var a,n=(a=e,t.menu.findIndex(function(t){return t.id===a}));-1!==n&&t.menu.splice(n,1)}}},T={namespaced:!0,state:function(){return{title:""}},mutations:{title:function(t,e){t.title=e}},modules:{menu:N}},V={namespaced:!0,state:function(){return{visible:!0}},getters:{},mutations:{visible:function(t){t.visible=!t.visible}},modules:{menu:N}};s.a.use(F.a);var M=new F.a.Store({strict:!1,state:{lang:void 0!==navigator.languages?navigator.languages[0]:navigator.language}});M.registerModule("toolbar",T),M.registerModule("drawer",V);var L=M,q=(a("3VHS"),a("sUu7")),G=a("bqTm"),W=a.n(G),j=a("3EgV"),H=a.n(j);a("7zck");s.a.config.productionTip=!1,s.a.use(H.a),s.a.use(q.a),s.a.use(W.a);var J=void 0;c.a.initializeApp({apiKey:"AIzaSyBiP2i-rJ3Esk46CP2XzclzFfpYkOU33C8",authDomain:"idea-91aa1.firebaseapp.com",databaseURL:"https://idea-91aa1.firebaseio.com",projectId:"idea-91aa1",storageBucket:"idea-91aa1.appspot.com",messagingSenderId:"1086146862670"}),c.a.auth().onAuthStateChanged(function(t){J||(J=new s.a({el:"#app",router:D,store:L,computed:i()({},F.a.mapState({toolbar:"toolbar",drawer:"drawer"})),methods:{visibleDrawer:function(){this.$store.commit("drawer/visible")}}}))})},RWR3:function(t,e){},UgMt:function(t,e){},lzeD:function(t,e){},ogXb:function(t,e){},w5zA:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.04ce4d114b93221c62e6.js.map